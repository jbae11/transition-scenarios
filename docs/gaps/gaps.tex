\documentclass{article}

%%%% packages and definitions (optional)
\usepackage{graphicx} % allows inclusion of graphics
\usepackage{graphics}
\usepackage{placeins}
\usepackage{booktabs} % nice rules (thick lines) for tables
\usepackage{microtype} % improves typography for PDF
\usepackage{xspace}
\usepackage[hidelinks]{hyperref}
\usepackage{xspace}
\usepackage{hhline}

\usepackage{tabularx}
\newcolumntype{b}{X}
\newcolumntype{s}{>{\hsize=.5\hsize}X}
\newcolumntype{m}{>{\hsize=.75\hsize}X}

\newcommand{\SN}{S$_N$}
\renewcommand{\vec}[1]{\bm{#1}} %vector is bold italic
\newcommand{\vd}{\bm{\cdot}} % slightly bold vector dot
\newcommand{\grad}{\vec{\nabla}} % gradient
\newcommand{\ud}{\mathop{}\!\mathrm{d}} % upright derivative symbol
\newcommand{\Cyclus}{\textsc{Cyclus}\xspace}%
\newcommand{\Cycamore}{\textsc{Cycamore}\xspace}%
\graphicspath{ {images/} }
\usepackage[affil-it]{authblk}
\usepackage{tikz}
\usetikzlibrary{positioning, arrows, decorations, shapes }
\usepackage{cleveref}

\usepackage[acronym,toc]{glossaries}
\include{acros}
	
\makeglossaries

\title{Non-algorithmic Capability Gaps for \Cyclus and \Cycamore for transition analyses }
\author{Jin Whan Bae, Kathryn Huff}
\affil{Dept. of Nuclear, Plasma, and Radiological Engineering, University of Illinois at Urbana-Champaign
		  Urbana, IL}
\date{}                     %% if you don't need date to appear
\setcounter{Maxaffil}{0}
\renewcommand\Affilfont{\itshape\small}
%%%%%%%%%%%%%%actual words%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%5



\begin{document}
\maketitle
\section{Introduction}
As part of NEUP-FY16-10512, fuel cycle
transition scenarios were simulated using \Cyclus and existing \Cycamore archetypes.
The purpose of this study
is to identify current non-algorithmic gaps in the capabilities necessary for key transition scenarios.
The gaps identified through this exercise mainly pertain to the greedy exchange model,
and the manual, static parameter of fuel cycle facilities. 
The scenarios are from the Idaho National Laboratory Nuclear Fuel Cycle Evaluation and Screening Report
(Hereby E\&S Report) \cite{wigeland_nuclear_2014}. The transition scenarios begin with EG01 and transition to EG23, EG24, EG29, EG30,
separately. The descriptions of each fuel cycle appear in \cref{tab:es}.


\begin{table}[h]
	\centering
	\resizebox{\textwidth}{!}{
		\begin{tabular}{|l|l|}
			\hline
			Fuel Cycle & Description \\ \hline
			EG01 & Once-through using \gls{UOX} fuel in \glspl{LWR} \\ \hline
			EG23 & Continuous recycle of U/Pu with new natural U fuel in fast critical reactors \\ \hline 
			EG24 & Continuous recycle of U/TRU with new natural U fuel in fast critical reactors \\ \hline
			EG29 & Continuous recycle of U/Pu with new natural U fuel in both fast and thermal critical reactors \\ \hline
			EG30 & Continuous recycle of U/TRU with new natural U fuel in both fast and thermal critical reactors \\ \hline
		\end{tabular}
		}
		\caption{Evaluation groups identified by the E\&S report.}
		\label{tab:es}
\end {table} 



\section{Simulation Specifics}
The transition scenarios in this study follow a common set of base-case parameters and assumptions,
adopted by the Fuel Cycle Options Campaign \cite{djokic_application_2015}.
% Need to list them?

The reactor specifications (mass of core, batch, refueling cycle) follow
those given by the E\&S report appendix B \cite{wigeland_nuclear_2014}.

For the compositions of the fresh and spent fuels, various models give different answers.
As will be discussed later, the recipe (more specifically the Breeding Ratio of the \gls{SFR}),
plays a crucial role in the rapidity and success of the transition. 

\subsection{Important Parameters}
For a successful transition, there must be enough fissile materials in store prior to transition
to start new advanced reactors. Also, enough surplus fissile materials have to be produced
during the transition to support the start of new reactors.

To satisfy such conditions, the important simulation parameters identified are listed in table
\ref{tab:param}.

\begin{table}[h]
	\centering
	\resizebox{\textwidth}{!}{
		\begin{tabular}{lllllll}
			\hline
			Parameter & EG23 & EG24 & \multicolumn{2}{c}{EG29} & \multicolumn{2}{c}{EG30} \\ \hline
			Breeding Ratio & 1.059 & 1.014 & 1.26 & 0.70 & 1.56 & 0.70 \\
			Transition Initiating Time [Month] & 1596 & 1848 & \multicolumn{2}{c}{2101} & \multicolumn{2}{c}{1178} \\
			Reprocessing Capacity [MTHM/month] & \multicolumn{6}{c}{$1E100$ for all EGs}\\ 
			Reprocessing Buffer [MTHM] & \multicolumn{6}{c}{$1E100$ for all EGs} \\
			Fabrication Throughput [MTHM/month] & $1E100$ & $1E100$ & 2,000 & 3E6 & 4,000 & 900 \\
 			Fabrication Buffer [MTHM] & $1E100$ & $1E100$ & 1 & 100 & 9,000 & 1,000 \\
			\hline
		\end{tabular}
		}
		\caption{Parameters for different Evaluation Groups. The left column of EG29 and EG30
				 are FR values, and the right MOX LWR values.}
		\label{tab:param}
\end {table} 

This is assuming that the following parameters are fixed:
\begin{enumerate}
	\item Reactor Specifics (listed in tabel \ref{tab:react}).
	\item Separation Efficiency (99.8\%)
	\item Increase Rate of Power Demand (1\% annual growth in energy demand)
\end{enumerate}

\begin{table}[h]
    \centering
    \begin{tabular}{cccc}
        \hline
        \textbf{Specification} & LWR & MOX LWR & FR\\
        \hline
                Lifetime [y] & 60 & 80 & 80 \\
                Cycle Time [mos.]& 18 & 18 & 14\\ 
                Refueling Outage [mos.]& 1 & 1  & 1\\
                Rated Power [MWe] & 1000 & 1000 & 400\\
                Batch mass [kg] & 30,106 & 33,115 & 6,519 \\
                Batches per core & 3 & 3 & 3\\
                Initial Fissile Composition & 4\% $^{235}U$ & 9\% Pu & Varies by EG \\
        \hline
    \end{tabular}
        \caption {Important reactor specifications are listed. The initial fissile composition
        		 for FRs vary by evaluation group, as it did for the original evaluation and screening
        		  study \cite{wigeland_nuclear_2014}. The compositions can be found in appendix B of the
        		  original report.}
    \label{tab:react}

    \end{table}

\subsection{Recipes}
The \textsc{Reactor}\xspace archetype in \Cycamore uses recipes to approximate
transmutation in the Reactor facility,
where the spent fuel composition is user-defined and constant. 

The recipe from appendix B of the E\&S report does not take into account
additional deployment of reactors from increased power demand ( the breeding ratio
of \glspl{SFR} in the appendix are low), which means that there is no (or very little)
extra fissile material (Pu or TRU) produced. For EG23 and EG24, the breeding ratios are
a little over breakeven (~1.01), which makes deployment of additional reactors solely 
dependent on fissile material inventory from legacy LWR \gls{UNF}. For EG29 and EG30,
the Breeding Ratios are big higher (~1.29 and 1.05, respectively) to feed the
\gls{MOX} \glspl{LWR}, but still does not accumulate fissile material inventory for
additional reactor deployment.

To solve this problem, we used an ORIGEN-generated depletion recipe. This recipe
has a fresh fuel plutonium composition of 12.9\%, and a BR of $1.16$. This breeding
ratio allows complete SFR transition in 2170 for EG23 and EG24. For EG29 and EG30,
the BRs have to be higher to feed the \gls{MOX} \glspl{LWR}. 


\section{Gaps}
The test-runs with \Cyclus and \Cycamore revealed various non-algorithmic gaps
of the current \Cycamore archetypes as well as minor gaps in the \Cyclus framework itself. 

\subsection{Gap: Static Facility Parameters}
The most fundamental issue is that the capacity and deployment (thus the supply) is not
demand-driven, but static. All of the parameters for fuel support facilities (\textsc{FuelFab}\xspace,
\textsc{Mixer}\xspace, \textsc{Separations}\xspace) remain static throughout the simulation.
This is not desirable, especially given the dynamic nature of transition scenarios. 

Various parameters, most notably throughput and capacity values of the fuel cycle support fleet,
need to adjust according to demand. In transition scenarios with increasing power demand, the 
demand for fuel and fissile material generally increases over time. The current workaround is to either
have a facility with infinite capacity, or to set the capacity to a manually-calculated (look-back method)
maximum fuel demand. The infinite capacity method fails for EG29 and EG30, due to the greedy exchange
model. The look-back method allows a complete simulation, but inefficiencies occur with the distribution
of fissile material, since the facility with the higher demand has to fill up first in order for the facility
with the lower demand to receive fissile material. 



\Cref{fig:mox} and \cref{fig:sfr} plot the fuel demand of \gls{MOX} \glspl{LWR} and \glspl{SFR},
respectively, in an EG29 scenario. This is an example of the look-back method, where, initially, an infinite source
of fuel (both \gls{MOX} and \gls{SFR} fuel) was deployed to estimate how much the fuel fabrication
throughput should be, for a successful simulation. A second simulation then would have a 
fuel fabrication plant with throughputs that correspond to the maximum value of fuel demand in a timestep
(2,000 for \gls{MOX}, 1900 for \gls{SFR} fuel).

\begin{figure}[htbp!]
	\begin{center}
		\includegraphics[scale=0.6]{./images/mox_fuel.png}
	\end{center}
	\caption{\gls{MOX} fuel demand for EG29}
	\label{fig:mox}
\end{figure}
\begin{figure}[htbp!]
	\begin{center}
		\includegraphics[scale=0.6]{./images/sfr_fuel.png}
	\end{center}
	\caption{\gls{SFR} fuel demand for EG29}
	\label{fig:sfr}
\end{figure}
\FloatBarrier

A fix for this is to have a dynamic throughput that adjusts according
to predicted fuel demand, or, more realistically, deploy an archetype with fixed, reasonable, throughput/buffer when fuel demand outpaces existing throughput.


\subsection{Greedy Exchange Model}
The \Cyclus Dynamic Resource Exchange, is ``greedy''. That is,  if there isn't
enough supply for all demands, the bigger demand gets filled first.
This ``greedy'' modeling decision sought to mimic real markets in which large capacity
buyer receive preferential treatment. 
In EG23 and EG24,
there is one archetype that receives separated fissile materials. That archetype
can have infinite buffer/throughput because it is the only
archetype with the demand for that commodity. However, EG29 and EG30 has two archetypes
that compete for the fissile materials (ie. \gls{MOX} fuel fab competes with \gls{SFR} fuel fab for separated plutonium).
In this case, if both fabrication plants have infinite buffer/throughput, one fabrication takes all the
separated fissile material, leaving the other plant idle.


\subsection{Individual Demand Estimation}
Currently, the \Cyclus framework's market is completely agent-based. At every timestep, each agent `submits' its
demand and supply and the trade is made. However, this individual frame can cause inefficiencies mentioned previously.
A more efficient process would be to set all demands proportional to the fuel demand. An example is illustrated
in \cref{diag:hd}.

% Define block styles
\tikzstyle{decision} = [diamond, draw, fill=blue!20, 
text width=4.5em, text badly centered, node distance=3cm, inner sep=0pt]
\tikzstyle{block} = [rectangle, draw, fill=blue!20, 
text width=5em, text centered, rounded corners, minimum height=4em]
\tikzstyle{line} = [draw, -latex']
\tikzstyle{cloud} = [draw, ellipse,fill=red!20, node distance=3cm,
minimum height=2em]


\begin{figure}
	\centering
	\scalebox{0.7}{
		\begin{tikzpicture}[align=center, node distance = 3cm and 3cm, auto]
		% Place nodes
		\node [block] (rea) {\texttt{Reactor}};
		\node [cloud, below of=rea] (d1) {1. Demand: \textbf{Fuel}};
		\node [cloud, below of=d1] (s1) {2. Change throughput to \textbf{Fuel}};
		\node [block, below of=s1] (ff) {\texttt{FuelFab}};
		\node [cloud, below of=ff] (d2) {3. Demand: Fissile Material ($\propto \textbf{Fuel}$)};		
		\node [cloud, below of=d2] (s2) {4. Change capacity to ($\propto \textbf{Fuel}$)};
		\node [block, below of=s2] (rep) {\texttt{Separations}};
		
		
		\draw[->, thick] (rea) -- (d1);
		\draw[->, thick] (d1) -- (s1);
		\draw[->, thick] (s1) -- (ff);
		\draw[->, thick] (ff) -- (d2);
		\draw[->, thick] (d2) -- (s2);
		\draw[->, thick] (s2) -- (rep);
		\end{tikzpicture}
		
	}
	\caption{Fuel-centered Demand Logic Flow}
	\label{diag:hd}
\end{figure}
 

\subsection{A Need For Market-Peeking}
The \Cyclus framework can benefit greatly from a market-peeking capability,
where each agent can query the market (previous transactions or demand) to adjust its parameters. For example, fuel fabrication
agents could query the previous (or, eventually, expected) demand of fuel and adjust their throughputs to meet the demand. 
The market-peeking capability is essential for demand-prediction models.

Moreover, with the market-peeking capability, support facilities could estimate adjust their
capacities by estimating
the demand of fuel/fissile material proportional to power demand (`power' is a market commodity in \Cyclus).

\subsection{Irresponsible deployment}
The \textsc{DeployInst}\xspace model deploys prototypes in a user-defined time period.
With infeasible input specs, it still deploys reactors without checking fuel availability.
The deployed reactor is remains idle if the fuel supply is short. Deploying new reactors
without sufficient fissile material to support them can cause other already-deployed reactors without fuel, causing
a cascade of shutdowns. Using the market-peeking or feedback capability, new reactors could be deployed only
if there is sufficient fuel to support the startup of the reactor as well as currently deployed reactors. 


\section{Additional Possible Improvements}
Though not critical to the current goal, having the following capabilities may increase
the accuracy of simulations.


\subsection{Blanket capability for \textsc{Reactor}\xspace}
For \glspl{SFR}, the blanket and the driver have different effective fuel residence times, meaning that
they should (ideally) be discharged and loaded separately. However, with current capabilities, the option is to average
the mass and composition of driver and blanket to treat it as one commodity.

\subsection{Depletion Calculations}
Depletion calculations are done outside of the simulation. However, if advanced reactor models like \textsc{Cyborg}\xspace
or \textsc{Bright-Lite}\xspace are utilized, there could be more accurate depletion calculations and 
perhaps dynamic Breeding Ratio modeling.

\bibliographystyle{abbrv}
\bibliography{bibliography}


\end{document}